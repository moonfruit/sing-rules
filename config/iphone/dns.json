{
  "dns": {
    "servers": [
      {
        "tag": "dns-resolver",
        "type": "udp",
        "server": "119.29.29.29"
      },
      {
        "tag": "dns-direct",
        "type": "https",
        "server": "doh.pub",
        "domain_resolver": "dns-resolver"
      },
      {
        "tag": "dns-proxy",
        "type": "udp",
        "server": "one.one.one.one",
        "domain_resolver": "dns-resolver"
      },
      {
        "tag": "dns-gingkoo",
        "type": "https",
        "server": "10.1.2.32",
        "tls": {
          "insecure": true
        }
      },
      {
        "tag": "dns-hosts",
        "type": "hosts",
        "predefined": {
          "asusrouter.com": "192.168.50.1",
          "router.asus.com": "192.168.50.1",
          "www.asusrouter.com": "192.168.50.1"
        }
      },
      {
        "tag": "dns-fakeip",
        "type": "fakeip",
        "inet4_range": "198.18.0.0/15",
        "inet6_range": "fc00::/64"
      }
    ],
    "rules": [
      {
        "ip_accept_any": true,
        "server": "dns-hosts",
        "rewrite_ttl": 2592000
      },
      {
        "domain_suffix": ["arpa", "local"],
        "action": "predefined",
        "rcode": "NXDOMAIN"
      },
      {
        "domain": ["dns.alidns.com", "doh.pub", "dot.pub", "dns.google", "one.one.one.one", "cloudflare-dns.com"],
        "server": "dns-resolver"
      },
      {
        "domain_suffix": [
          "apple.com",
          "gingkoo.com",
          "ip.sb",
          "ipip.net",
          "lazycat.cloud",
          "alicdn.win",
          "demo-chat-airport.com",
          "xipcloud.org",
          "v2ray.in"
        ],
        "server": "dns-direct"
      },
      {
        "domain_suffix": "server.gingkoo",
        "server": "dns-gingkoo",
        "rewrite_ttl": 2592000
      },
      {
        "query_type": ["A", "AAAA"],
        "server": "dns-fakeip",
        "rewrite_ttl": 1
      },
      {
        "clash_mode": "Direct",
        "server": "dns-direct"
      },
      {
        "clash_mode": "Global",
        "server": "dns-proxy"
      },
      {
        "rule_set": "GeoSites@CN",
        "server": "dns-direct"
      },
      {
        "type": "logical",
        "mode": "and",
        "rules": [
          {
            "rule_set": "GeoSites@!CN",
            "invert": true
          },
          {
            "rule_set": "GeoIP@CN"
          }
        ],
        "server": "dns-direct"
      }
    ],
    "final": "dns-proxy",
    "independent_cache": true,
    "reverse_mapping": true,
    "strategy": "prefer_ipv6"
  },
  "inbounds": [
    {
      "type": "direct",
      "tag": "dns-in",
      "listen": "127.0.0.1",
      "listen_port": 53
    }
  ],
  "route": {
    "rules": [
      {
        "network": "icmp",
        "outbound": "DIRECT"
      },
      {
        "action": "sniff"
      },
      {
        "protocol": "dns",
        "action": "hijack-dns"
      },
      {
        "protocol": ["bittorrent", "ntp", "stun"],
        "action": "hijack-dns"
      },
      {
        "ip_is_private": true,
        "outbound": "DIRECT"
      }
    ],
    "rule_set": [
      {
        "type": "remote",
        "tag": "GeoIP@CN",
        "url": "https://gitee.com/api/v5/repos/moonfruit/private/raw/rules/geoip-cn.srs?access_token=c1f6ba66dd5b8620b26ac68f2fad7a52&ref=main",
        "download_detour": "DIRECT"
      },
      {
        "type": "remote",
        "tag": "GeoSites@CN",
        "url": "https://gitee.com/api/v5/repos/moonfruit/private/raw/rules/geosites-cn.srs?access_token=c1f6ba66dd5b8620b26ac68f2fad7a52&ref=main",
        "download_detour": "DIRECT"
      },
      {
        "type": "remote",
        "tag": "GeoSites@!CN",
        "url": "https://gitee.com/api/v5/repos/moonfruit/private/raw/rules/geosites-not-cn.srs?access_token=c1f6ba66dd5b8620b26ac68f2fad7a52&ref=main",
        "download_detour": "DIRECT"
      }
    ],
    "default_domain_resolver": "dns-direct"
  }
}
